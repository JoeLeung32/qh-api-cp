<%- include ('../shared/header') %>
<form>
	<input type="text" name="username" value="admin">
	<input type="text" name="password" value="admin">
	<button type="submit">Submit</button>
</form>
<script>
	const form = document.querySelector('form')
	form.addEventListener('submit', async (ev) => {
		ev.preventDefault()
		const formData = new FormData(form);
		const data = {
			username: formData.get('username'),
			password: formData.get('password'),
		}
		api.login(data).then(response => {
			const cookie = {
				token: response.token,
				expires: new Date(response.expiry),
				path: '/',
				secure: true
			}
			document.cookie = Object.entries(cookie).map(([key, value]) => {
				return `${key}=${value}`
			}).join('; ')
			window.location.reload()
		})
	})
</script>
<script src="./static/api.js"></script>
<%- include ('../shared/footer') %>
